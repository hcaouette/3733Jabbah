<html><head><script type="text/javascript">
let add_url = "https://8pzpcdfj7l.execute-api.us-east-2.amazonaws.com/First/calendar"; //createScheduler
let delete_url = "https://8pzpcdfj7l.execute-api.us-east-2.amazonaws.com/First/calendar"; //deleteSchedule
let display_url = "https://8pzpcdfj7l.execute-api.us-east-2.amazonaws.com/First/showweek";//show schedule by week, pullSchedule()
let open_url = "https://8pzpcdfj7l.execute-api.us-east-2.amazonaws.com/First/opentimeslot";
let close_url = "https://8pzpcdfj7l.execute-api.us-east-2.amazonaws.com/First/closetimeslot";
let book_url = "https://8pzpcdfj7l.execute-api.us-east-2.amazonaws.com/First/createmeeting";
let cancel_url = "https://8pzpcdfj7l.execute-api.us-east-2.amazonaws.com/First/cancelmeetingparticipant";
let cancelO_url = "https://8pzpcdfj7l.execute-api.us-east-2.amazonaws.com/First/cancelmeetingorg";
let displayP_url = "https://8pzpcdfj7l.execute-api.us-east-2.amazonaws.com/First/showweekparticipant";
let openOnDay_url = "https://8pzpcdfj7l.execute-api.us-east-2.amazonaws.com/First/opentimeslotsonday";
let openOnTime_url = "https://8pzpcdfj7l.execute-api.us-east-2.amazonaws.com/First/opentimeslotsattime";
let closeOnDay_url = "https://8pzpcdfj7l.execute-api.us-east-2.amazonaws.com/First/closetimeslotsonday";
let closeOnTime_url = "https://8pzpcdfj7l.execute-api.us-east-2.amazonaws.com/First/closetimeslotsattime";
let showOpen_url = "https://8pzpcdfj7l.execute-api.us-east-2.amazonaws.com/First/showopentimeslots";
function processResponse(arg1, arg2, arg3, arg4, arg5, arg6) {

}
//startup functions
/* We probably won't use these, but in case we do:
function processGetUserResponse(result, arg2) {
    // Can grab any DIV or SPAN HTML element and can then manipulate its
    // contents dynamically via javascript
    console.log("result:" + result);
    var js = JSON.parse(result);

    var userCode = js["accessCode"];
    var orgCode = js["orgAccessCode"];
    var currentName = js["name"];
    var status      = js["httpCode"];

    if (status == 200) {
      // Update computation result
      document.addForm.result.value = computation
    } else {
      var msg = js["errorMessage"];
      document.addForm.result.value = "error:" + msg
    }
  }

function processGetScheduleResponse(result, arg2) {
    // Can grab any DIV or SPAN HTML element and can then manipulate its
    // contents dynamically via javascript
    console.log("result:" + result);
    var js = JSON.parse(result);

    var userCode = js["accessCode"];
    var orgCode = js["orgAccessCode"];
    var currentName = js["name"];
    var status      = js["httpCode"];

    if (status == 200) {
      // Update computation result
      document.addForm.result.value = computation
    } else {
      var msg = js["errorMessage"];
      document.addForm.result.value = "error:" + msg
    }
  }
*/
function firstLoad(){
    let output = "<label for='loginText'>Enter your access code here, if you're a system admin</label>";
    output+="<br><textarea id='loginText' rows='2' cols='20'></textarea>";
    output+="<button type='button' onclick='systemAdmin()'>System Admin</button>";
    output+="<br><br>";
    output+="<label for='newOrganizer'>Enter a Username to get started as an Organizer</label>";
    output+="<br><textarea id='newOrganizer' rows='2' cols='20'></textarea>";
    output+=" <button type='button' onclick='organizer()'>Organizer</button>";
    output+="<br><br>";
    output+="<label for='userText'>Enter a Username to get started as a participant</label>";
    output+="<br><textarea id='userText' rows='2' cols='20'></textarea>";
    output+="   <button type='button' onclick='participant()'>Participant</button>";

    document.getElementById("panelPrint").innerHTML = output;
}

//primary operations
function openFunc(days, startTime) {
  let form = document.addForm;
  let monthTest = days.substring(0, 3);
  let dayTest = days.substring(4, 6);
  let yearTest = "";
  if (dayTest.includes(",")) {
      dayTest = "0" + days.substring(4, 5);
      yearTest = days.substring(7, 11);
  } else {
      yearTest = days.substring(8, 12);
  }
  if (monthTest == "Jan") {
      monthTest = "01";
      } else if (monthTest == "Feb") {
          monthTest = "02";
      } else if (monthTest == "Mar") {
          monthTest = "03";
      } else if (monthTest == "Apr") {
          monthTest = "04";
      } else if (monthTest == "May") {
          monthTest = "05";
      } else if (monthTest == "Jun") {
          monthTest = "06";
      } else if (monthTest == "Jul") {
          monthTest = "07";
      } else if (monthTest == "Aug") {
          monthTest = "08";
      } else if (monthTest == "Sep") {
          monthTest = "09";
      } else if (monthTest == "Oct") {
          monthTest = "10";
      } else if (monthTest == "Nov") {
          monthTest = "11";
      } else if (monthTest == "Dec") {
          monthTest = "12";
      }
      let arg = yearTest + "-" + monthTest + "-" + dayTest;

      let data = {};
      data["idDay"] = arg;
      data["startTime"] = startTime;
      data["scheduleID"] = document.getElementById("secretID").value;

      let js = JSON.stringify(data);
      console.log("JS:" + js);
      let xhr = new XMLHttpRequest();
      xhr.open("POST", open_url, true);

      // send the collected data as JSON
      xhr.send(js);

      // This will process results and update HTML as appropriate.
      xhr.onloadend = function() {
          console.log(xhr);
          console.log(xhr.request);
          if (xhr.readyState == XMLHttpRequest.DONE) {
              console.log("XHR:" + xhr.responseText);
              pullSchedule();
              //processResp(xhr.responseText.body);
          } else {
              //processResp("N/A");
          }
      };
  }
function closeFunc(days, startTime) {
  let form = document.addForm;
  let monthTest = days.substring(0, 3);
  let dayTest = days.substring(4, 6);
  let yearTest = "";
  if (dayTest.includes(",")) {
      dayTest = "0" + days.substring(4, 5);
      yearTest = days.substring(7, 11);
  } else {
      yearTest = days.substring(8, 12);
  }
  if (monthTest == "Jan") {
      monthTest = "01";
      } else if (monthTest == "Feb") {
          monthTest = "02";
      } else if (monthTest == "Mar") {
          monthTest = "03";
      } else if (monthTest == "Apr") {
          monthTest = "04";
      } else if (monthTest == "May") {
          monthTest = "05";
      } else if (monthTest == "Jun") {
          monthTest = "06";
      } else if (monthTest == "Jul") {
          monthTest = "07";
      } else if (monthTest == "Aug") {
          monthTest = "08";
      } else if (monthTest == "Sep") {
          monthTest = "09";
      } else if (monthTest == "Oct") {
          monthTest = "10";
      } else if (monthTest == "Nov") {
          monthTest = "11";
      } else if (monthTest == "Dec") {
          monthTest = "12";
      }
      let arg = yearTest + "-" + monthTest + "-" + dayTest;

      let data = {};
      data["idDay"] = arg;
      data["startTime"] = startTime;
      data["scheduleID"] = document.getElementById("secretID").value;

      let js = JSON.stringify(data);
      console.log("JS:" + js);
      let xhr = new XMLHttpRequest();
      xhr.open("POST", close_url, true);

      // send the collected data as JSON
      xhr.send(js);

      // This will process results and update HTML as appropriate.
      xhr.onloadend = function() {
          console.log(xhr);
          console.log(xhr.request);
          if (xhr.readyState == XMLHttpRequest.DONE) {
              console.log("XHR:" + xhr.responseText);
              pullSchedule();
              //processResp(xhr.responseText.body);
          } else {
              //processResp("N/A");
          }
      };
}
function bookFunc(days, startTime){
  //console.log(day);
  //console.log(time);
    let form = document.addForm;
    let monthTest = days.substring(0, 3);
    let dayTest = days.substring(4, 6);
    let yearTest = "";
    if (dayTest.includes(",")) {
        dayTest = "0" + days.substring(4, 5);
        yearTest = days.substring(7, 11);
    } else {
        yearTest = days.substring(8, 12);
    }
    if (monthTest == "Jan") {
        monthTest = "01";
        } else if (monthTest == "Feb") {
            monthTest = "02";
        } else if (monthTest == "Mar") {
            monthTest = "03";
        } else if (monthTest == "Apr") {
            monthTest = "04";
        } else if (monthTest == "May") {
            monthTest = "05";
        } else if (monthTest == "Jun") {
            monthTest = "06";
        } else if (monthTest == "Jul") {
            monthTest = "07";
        } else if (monthTest == "Aug") {
            monthTest = "08";
        } else if (monthTest == "Sep") {
            monthTest = "09";
        } else if (monthTest == "Oct") {
            monthTest = "10";
        } else if (monthTest == "Nov") {
            monthTest = "11";
        } else if (monthTest == "Dec") {
            monthTest = "12";
        }
        let arg = yearTest + "-" + monthTest + "-" + dayTest;
        let arg2 = makePartId();
        let data = {};
        data["day"] = arg;
        data["startTime"] = startTime;
        data["initialAccessCode"] = document.getElementById("secretID").value;
        data["name"] = document.getElementById("currentName").innerHTML.substring(6);
        data["newParticipantCode"] = arg2;
        console.log(data["name"]);

        let js = JSON.stringify(data);
        console.log("JS:" + js);
        let xhr = new XMLHttpRequest();
        xhr.open("POST", book_url, true);

        // send the collected data as JSON
        xhr.send(js);

        // This will process results and update HTML as appropriate.
        xhr.onloadend = function() {
            console.log(xhr);
            console.log(xhr.request);
            if (xhr.readyState == XMLHttpRequest.DONE) {
                console.log("XHR:" + xhr.responseText);
                alert("Your unique id is: " + arg2);
                pullScheduleP();
                //processResp(xhr.responseText.body);
            } else {
                //processResp("N/A");
            }
        };
    //window.confirm("Please confirm you want to book at "+day+", "+time);
}
function cancelFunc(days, startTime){
      let form = document.addForm;
      let monthTest = days.substring(0, 3);
      let dayTest = days.substring(4, 6);
      let yearTest = "";
      if (dayTest.includes(",")) {
          dayTest = "0" + days.substring(4, 5);
          yearTest = days.substring(7, 11);
      } else {
          yearTest = days.substring(8, 12);
      }
      if (monthTest == "Jan") {
          monthTest = "01";
          } else if (monthTest == "Feb") {
              monthTest = "02";
          } else if (monthTest == "Mar") {
              monthTest = "03";
          } else if (monthTest == "Apr") {
              monthTest = "04";
          } else if (monthTest == "May") {
              monthTest = "05";
          } else if (monthTest == "Jun") {
              monthTest = "06";
          } else if (monthTest == "Jul") {
              monthTest = "07";
          } else if (monthTest == "Aug") {
              monthTest = "08";
          } else if (monthTest == "Sep") {
              monthTest = "09";
          } else if (monthTest == "Oct") {
              monthTest = "10";
          } else if (monthTest == "Nov") {
              monthTest = "11";
          } else if (monthTest == "Dec") {
              monthTest = "12";
          }
          let arg = yearTest + "-" + monthTest + "-" + dayTest;

          let initAcc = prompt("Please enter your unique access code for this meeting", "");

          let data = {};
          data["day"] = arg;
          data["startTime"] = startTime;
          data["participantCode"] = initAcc;
          data["initialAccessCode"] = document.getElementById("secretID").value;

          let js = JSON.stringify(data);
          console.log("JS:" + js);
          let xhr = new XMLHttpRequest();
          xhr.open("POST", cancel_url, true);

          // send the collected data as JSON
          xhr.send(js);

          // This will process results and update HTML as appropriate.
          xhr.onloadend = function() {
              console.log(xhr);
              console.log(xhr.request);
              if (xhr.readyState == XMLHttpRequest.DONE) {
                  console.log("XHR:" + xhr.responseText);
                  pullScheduleP();
                  //processResp(xhr.responseText.body);
              } else {
                  //processResp("N/A");
              }
          };
      //window.confirm("Please confirm you want to book at "+day+", "+time);
  }
function cancelFuncO(days, startTime){
  let form = document.addForm;
  let monthTest = days.substring(0, 3);
  let dayTest = days.substring(4, 6);
  let yearTest = "";
  if (dayTest.includes(",")) {
      dayTest = "0" + days.substring(4, 5);
      yearTest = days.substring(7, 11);
  } else {
      yearTest = days.substring(8, 12);
  }
  if (monthTest == "Jan") {
      monthTest = "01";
      } else if (monthTest == "Feb") {
          monthTest = "02";
      } else if (monthTest == "Mar") {
          monthTest = "03";
      } else if (monthTest == "Apr") {
          monthTest = "04";
      } else if (monthTest == "May") {
          monthTest = "05";
      } else if (monthTest == "Jun") {
          monthTest = "06";
      } else if (monthTest == "Jul") {
          monthTest = "07";
      } else if (monthTest == "Aug") {
          monthTest = "08";
      } else if (monthTest == "Sep") {
          monthTest = "09";
      } else if (monthTest == "Oct") {
          monthTest = "10";
      } else if (monthTest == "Nov") {
          monthTest = "11";
      } else if (monthTest == "Dec") {
          monthTest = "12";
      }
      let arg = yearTest + "-" + monthTest + "-" + dayTest;


      let data = {};
      data["day"] = arg;
      data["startTime"] = startTime;
      data["initialAccessCode"] = document.getElementById("secretID").value;

      let js = JSON.stringify(data);
      console.log("JS:" + js);
      let xhr = new XMLHttpRequest();
      xhr.open("POST", cancelO_url, true);

      // send the collected data as JSON
      xhr.send(js);

      // This will process results and update HTML as appropriate.
      xhr.onloadend = function() {
          console.log(xhr);
          console.log(xhr.request);
          if (xhr.readyState == XMLHttpRequest.DONE) {
              console.log("XHR:" + xhr.responseText);
              pullSchedule();
          } else {
          }
      };
  //window.confirm("Please confirm you want to book at "+day+", "+time);
}
function openTimeSlot(){
  let secretID = document.getElementById("secretID").value;
  let openDay = document.getElementById("numDays").value;
  let openTime = document.getElementById("time").value;

  //makes sure both fields aren't filled
  if((openDay != "") && (openTime != "")){
    alert("you can only enter one of these fields");
    console.log("failed to mass open slots");
    console.log(openDay);
    console.log(openTime);
    return;
  }

  if(openTime != ""){
    //opening-by-time case
    let openTimeData = {};
    openTimeData["startTime"] = openTime;
    openTimeData["scheduleID"] = secretID;

    let openTimeJS = JSON.stringify(openTimeData);
    console.log("JS:" + openTimeJS);
    let openTimeXHR = new XMLHttpRequest();
    openTimeXHR.open("POST", openOnTime_url, true);
    // send the collected data as JSON
    openTimeXHR.send(openTimeJS);

    /**
    // This will process results and update HTML as appropriate.
    openTimeXHR.onloadend = function () {
      console.log(openTimeXHR);
      console.log(openTimeXHR.request);
      if (openTimeXHR.readyState == XMLHttpRequest.DONE) {
        console.log ("XHR:" + openTimeXHR.responseText);
        processResp(openTimeXHR.responseText);
      } else {
        processResp("N/A");
      }
    };*/
    console.log("opened all at"+openTime);
  }

  if(openDay != ""){
    //opening-by-date case
    let openDateData = {};
    openDateData["day"] = openDay;
    openDateData["scheduleID"] = secretID;

    let openDateJS = JSON.stringify(openDateData);
    console.log("JS:" + openDateJS);
    let openDateXHR = new XMLHttpRequest();
    openDateXHR.open("POST", openOnDay_url, true);
    // send the collected data as JSON
    openDateXHR.send(openDateJS);

    /**
    // This will process results and update HTML as appropriate.
    openDateXHR.onloadend = function () {
      console.log(openDateXHR);
      console.log(openDateXHR.request);
      if (openDateXHR.readyState == XMLHttpRequest.DONE) {
        console.log ("XHR:" + openDateXHR.responseText);
        processResp(openDateXHR.responseText);
      } else {
        processResp("N/A");
      }
    };*/
    console.log("opened all at"+openDay);
  }
}
function closeTimeSlot(){
  let secretID = document.getElementById("secretID").value;
  let closeDay = document.getElementById("numDays").value;
  let closeTime = document.getElementById("time").value;

  //makes sure both fields aren't filled
  if((closeDay != "") && (closeTime != "")){
    alert("you can only enter one of these fields");
    console.log("failed to mass open slots");
    console.log(closeDay);
    console.log(closeTime);
    return;
  }


  if(closeTime != ""){
    //closing-by-time case
    let closeTimeData = {};
    closeTimeData["startTime"] = closeTime;
    closeTimeData["scheduleID"] = secretID;

    let closeTimeJS = JSON.stringify(closeTimeData);
    console.log("JS:" + closeTimeJS);
    let closeTimeXHR = new XMLHttpRequest();
    closeTimeXHR.open("POST", closeOnTime_url, true);
    // send the collected data as JSON
    closeTimeXHR.send(closeTimeJS);

    /**
    // This will process results and update HTML as appropriate.
    closeTimeXHR.onloadend = function () {
      console.log(closeTimeXHR);
      console.log(closeTimeXHR.request);
      if (closeTimeXHR.readyState == XMLHttpRequest.DONE) {
        console.log ("XHR:" + closeTimeXHR.responseText);
        processResp(closeTimeXHR.responseText);
      } else {
        processResp("N/A");
      }
    };*/
    console.log("closed all at"+closeTime);
  }

  if(closeDay != ""){
    //closing-by-date case
    let closeDateData = {};
    closeDateData["day"] = closeDay;
    closeDateData["scheduleID"] = secretID;

    let closeDateJS = JSON.stringify(closeDateData);
    console.log("JS:" + closeDateJS);
    let closeDateXHR = new XMLHttpRequest();
    closeDateXHR.open("POST", closeOnDay_url, true);
    // send the collected data as JSON
    closeDateXHR.send(closeDateJS);

    /*// This will process results and update HTML as appropriate.
    closeDateXHR.onloadend = function () {
      console.log(closeDateXHR);
      console.log(closeDateXHR.request);
      if (closeDateXHR.readyState == XMLHttpRequest.DONE) {
        console.log ("XHR:" + closeDateXHR.responseText);
        processResp(closeDateXHR.responseText);
      } else {
        processResp("N/A");
      }
    };*/
    console.log("closed all at"+closeDay);
  }
}

//creation and deletion
function makeOrgId() {
    let text = "";
    let possible = "abcdefghijklmnopqrstuvwxyz";

    for (let i = 0; i < 10; i++)
      text += possible.charAt(Math.floor(Math.random() * possible.length));

    text += "O";
    return text;
  }
function makePartId() {
    let text = "";
    let possible = "abcdefghijklmnopqrstuvwxyz";

    for (let i = 0; i < 10; i++)
      text += possible.charAt(Math.floor(Math.random() * possible.length));

    text += "P";
    return text;
  }
function createSchedule(){

    //Schedule Creation:
    let orgAccessCode = makeOrgId();
    document.getElementById("currentInfo").innerHTML = " Org Access Code: " + orgAccessCode;
    let partAccessCode = makePartId();
    document.getElementById("currentInfo").innerHTML += " Participant Access Code: " + partAccessCode;
    //name creation is handled on the backend so it can be checked against the server
    let startDay = document.getElementById("createDate").value;
    let endDay = document.getElementById("endDate").value;
    let startTime = document.getElementById("startTime").value;
    let endTime = document.getElementById("endTime").value;
    let meetingInterval = document.getElementById("meetingInterval").value;
    let nameUsed = document.getElementById("scheduleName").value;
    //console.log(startDay, endDay, startTime, endTime, meetingInterval);
    /*JSON stuff*/
    let form = document.addForm;
    let arg2 = startDay;
    let arg3 = endDay;
    let arg4 = startTime;
    let arg5 = endTime;
    let arg6 = meetingInterval;
    let arg7 = nameUsed;

    let data = {};
    data["orgAccessCode"] = orgAccessCode; //have to be able to find organizer, (user),
    //and take their fields for the random access codes
    data["startTime"] = arg4;
    data["endTime"] = arg5;
    data["startDate"] = arg2;
    data["endDate"] = arg3;
    data["timeSlotLength"] = arg6;
    data["name"] = arg7;
    data["timeCreated"] = Math.floor(Date.now()); //get milliseconds since 1970
    data["initialParticipantAccessCode"] = partAccessCode;

    let js = JSON.stringify(data);
    console.log("JS:" + js);
    let xhr = new XMLHttpRequest();
    xhr.open("POST", add_url, true);

    // send the collected data as JSON
    xhr.send(js);

    // This will process results and update HTML as appropriate.
    xhr.onloadend = function () {
      console.log(xhr);
      console.log(xhr.request);
      if (xhr.readyState == XMLHttpRequest.DONE) {
        console.log ("XHR:" + xhr.responseText);
        //processResponse(orgAccessCode, arg2, arg3, arg4, arg5, arg6);
      } else {
        //processResponse("N/A", arg2, arg3, arg4, arg5, arg6);
      }
    };
}
function processDeleteResponse(result) {
    // Can grab any DIV or SPAN HTML element and can then manipulate its
    // contents dynamically via javascript
    console.log("deleted :" + result);

    //refreshSchedulesList();
  }
function deleteSchedule(orgAccessCodeh) {
   if (confirm("Are you sure you want to delete the entered schedule?")) {
     processDelete(orgAccessCodeh);
   }
}
function processDelete(orgAccessCode) {
  let orgAccessCoded = document.getElementById("secretID").value;
  let data = {};
  data["orgAccessCode"] = orgAccessCoded;

  let js = JSON.stringify(data);
  console.log("JS:" + js);
  let xhr = new XMLHttpRequest();
  xhr.open("DELETE", delete_url, true);

  // send the collected data as JSON
  xhr.send(js);

  // This will process results and update HTML as appropriate.
  xhr.onloadend = function () {
    console.log(xhr);
    console.log(xhr.request);
    if (xhr.readyState == XMLHttpRequest.DONE) {
      console.log ("XHR:" + xhr.responseText);
      processDeleteResponse(xhr.responseText);
    } else {
      processDeleteResponse("N/A");
    }
  };
}

//schedule renders
function pullScheduleP(){
    //a new schedule would not be created for pulling up the week in a schedule,
    //instead it should get the days in a schedule based on what access code and info they enter
    //Schedule Creation:
    //name creation is handled on the backend so it can be checked against the server
    let secretID = document.getElementById("secretID").value;
    console.log(secretID);
    let viewDate = document.getElementById("viewDateText").value;
    console.log(viewDate);
    /*JSON stuff*/
    let form = document.addForm;
    let arg2 = viewDate;
    let arg5 = secretID;

    let data = {};
    data["date"] = arg2;
    data["scheduleID"] = arg5;

    let js = JSON.stringify(data);
    console.log("JS:" + js);
    let xhr = new XMLHttpRequest();
    xhr.open("POST", displayP_url, true);

  // send the collected data as JSON
  xhr.send(js);

    // This will process results and update HTML as appropriate.
    xhr.onloadend = function () {
      console.log(xhr);
      console.log(xhr.request);
      if (xhr.readyState == XMLHttpRequest.DONE) {
        console.log ("XHR:" + xhr.responseText);
        processRespP(xhr.responseText);
        //processResp(xhr.responseText.body);
      } else {
          processRespP("N/A");
      }
    };
}
function pullSchedule(){
      //a new schedule would not be created for pulling up the week in a schedule,
      //instead it should get the days in a schedule based on what access code and info they enter
      //Schedule Creation:
      //name creation is handled on the backend so it can be checked against the server
      let secretID = document.getElementById("secretID").value;
      console.log(secretID);
      let viewDate = document.getElementById("viewDateText").value;
      console.log(viewDate);
      /*JSON stuff*/
      let form = document.addForm;
      let arg2 = viewDate;
      let arg5 = secretID;

      let data = {};
      data["date"] = arg2;
      data["scheduleID"] = arg5;

      let js = JSON.stringify(data);
      console.log("JS:" + js);
      let xhr = new XMLHttpRequest();
      xhr.open("POST", display_url, true);

    // send the collected data as JSON
    xhr.send(js);

      // This will process results and update HTML as appropriate.
      xhr.onloadend = function () {
        console.log(xhr);
        console.log(xhr.request);
        if (xhr.readyState == XMLHttpRequest.DONE) {
          console.log ("XHR:" + xhr.responseText);
          processResp(xhr.responseText);
          //processResp(xhr.responseText.body);
        } else {
            processResp("N/A");
        }
      };
}
function processResp(result) {
      let jData = JSON.parse(result);
      console.log(jData);
      //loading calender(visually) to html
      //let start = jData["startingDay"];
      let indexes = Object.keys(jData);
      console.log(indexes);
      console.log(jData["body"]);
      let jDataTwo = JSON.parse(jData["body"]);
      console.log(jDataTwo.week[0]);
      //console.log(JSON.parse(indexes[1]));
      let start = jDataTwo.startingDay;
      console.log(start);
      //console.log(jData.body.["startingDay"]);
      let startDayJson = jDataTwo.week[0];
      console.log(startDayJson);
      let startTime = startDayJson.startTime;
      console.log(startTime);
      let numIntervals = jDataTwo.interval; //the number of timeslots per day
      let myTable = "<table><tr><td style='font-size:16px;'>TIME</td>";
      //add the correct number of columns
      let columns = (jDataTwo.week.length / numIntervals);
      if (start == "Monday") {
      myTable += "<td>MON</td>";
      myTable += "<td>TUE</td>";
      myTable += "<td>WED</td>";
      myTable += "<td>THU</td>";
      myTable += "<td>FRI</td></tr>";
      //columns = 5;
      } else if (start == "Tuesday") {
          myTable += "<td>TUE</td>";
          myTable += "<td>WED</td>";
          myTable += "<td>THU</td>";
          myTable += "<td>FRI</td></tr>";
          //columns = 4;
          }
      else if (start == "Wednesday") {
          myTable += "<td>WED</td>";
          myTable += "<td>THU</td>";
          myTable += "<td>FRI</td></tr>";
          //columns = 3;
          }
      else if (start == "Thursday") {
          myTable += "<td>THU</td>";
          myTable += "<td>FRI</td></tr>";
          //columns = 2;
          }
      else {
          myTable += "<td>FRI</td></tr>";
          //columns = 1;
      }

      //let i = 0;
      //let k = 0;
      //while (i < (numIntervals*columns)) {
      //for(let i = 0; i< columns; i++) {
      for(let i = 0; i< numIntervals; i++) {
          let currSlot = jDataTwo.week[i];
          let currSlotForTime = jDataTwo.week[i];
          let currTime = currSlotForTime["startTime"];
          myTable += "<tr><td>"+currTime+"</td>";
          //for (let j = 0; j < numIntervals; j++) {
          for (let j = 0; j < columns; j++) {
            currSlot = jDataTwo.week[i + (j*numIntervals)];
              if (currSlot["isOpen"] == 0) {
                  //if slot is closed, make it able to be opened by clicking on it
                  myTable += "<td><button id='calButton' type='button' onclick='openFunc(";
                  myTable += "\""+currSlot.idDays.toString()+"\"";
                  myTable += ",";
                  myTable += "\""+currSlot.startTime.toString()+"\"";
                  myTable += ")'";
                  myTable += ">Open</button></td>";
              } else {
                  //if slot is open, make it able to be closed by clicking on it
                  myTable += "<td><button id='calButton' type='button' onclick='closeFunc(";
                  myTable += "\""+currSlot.idDays.toString()+"\"";
                  myTable += ",";
                  myTable += "\""+currSlot.startTime.toString()+"\"";
                  myTable += ")'";
                  myTable += ">Close</button>";
                  //along with option to just cancel the meeting
                  myTable += "<button id='calButton' type='button' onclick='cancelFuncO(";
                  myTable += "\""+currSlot.idDays.toString()+"\"";
                  myTable += ",";
                  myTable += "\""+currSlot.startTime.toString()+"\"";
                  myTable += ")'";
                  myTable += ">Cancel</button>";
                  if(currSlot.name != undefined){
                    //if timeslot is open and booked
                    //print name
                    myTable += "<p>";
                    myTable += currSlot.name.toString();
                    myTable += "</p>";
                    //add cancel meeting button
                    myTable += "<button id='calButton' type='button' onclick='cancelFuncO(";
                    myTable += "\""+currSlot.idDays.toString()+"\"";
                    myTable += ",";
                    myTable += "\""+currSlot.startTime.toString()+"\"";
                    myTable += ")'";
                    myTable += ">Close</button>";
                  }
                  myTable += "</td>";
              }
          }
          myTable += "</tr>";
      }
      myTable += "</table>";
      /**console.log(myTable);*/
      document.getElementById("tablePrint").innerHTML = myTable;
  }
function processRespP(result){
    let jData = JSON.parse(result);
    console.log(jData);
    //loading calender(visually) to html
    //let start = jData["startingDay"];
    let indexes = Object.keys(jData);
    console.log(indexes);
    console.log(jData["body"]);
    let jDataTwo = JSON.parse(jData["body"]);
    console.log(jDataTwo.week[0]);
    //console.log(JSON.parse(indexes[1]));
    let start = jDataTwo.startingDay;
    console.log(start);
    //console.log(jData.body.["startingDay"]);
    let startDayJson = jDataTwo.week[0];
    console.log(startDayJson);
    let startTime = startDayJson.startTime;
    console.log(startTime);
    let numIntervals = jDataTwo.interval; //the number of timeslots per day
    let myTable = "<table><tr><td style='font-size:16px;'>TIME</td>";
    //add the correct number of columns
    let columns = (jDataTwo.week.length / numIntervals);
    if (start == "Monday") {
    myTable += "<td>MON</td>";
    myTable += "<td>TUE</td>";
    myTable += "<td>WED</td>";
    myTable += "<td>THU</td>";
    myTable += "<td>FRI</td></tr>";
    // columns = 5;
    } else if (start == "Tuesday") {
        myTable += "<td>TUE</td>";
        myTable += "<td>WED</td>";
        myTable += "<td>THU</td>";
        myTable += "<td>FRI</td></tr>";
        // columns = 4;
        }
    else if (start == "Wednesday") {
        myTable += "<td>WED</td>";
        myTable += "<td>THU</td>";
        myTable += "<td>FRI</td></tr>";
        // columns = 3;
        }
    else if (start == "Thursday") {
        myTable += "<td>THU</td>";
        myTable += "<td>FRI</td></tr>";
        // columns = 2;
        }
    else {
        myTable += "<td>FRI</td></tr>";
        // columns = 1;
    }

    // let i = 0;
    // let k = 0;
    // while (i < (numIntervals*columns)) {
    for(let i=0;i<numIntervals;i++){
        let currSlot = jDataTwo.week[i];
        let currSlotForTime = jDataTwo.week[i];
        let currTime = currSlotForTime["startTime"];
        myTable += "<tr><td>"+currTime+"</td>";
        for (let j = 0; j < columns; j++) {
          currSlot = jDataTwo.week[i + (j*numIntervals)];
            if (currSlot["isOpen"] == 0) {
                //if slot is closed, show nothing to participant
                //myTable += "<td><button type='button' onclick="openFunc(\'' + currSlot["idDays"] + "," + currSlot["startTime"] + '\')">Open</button></td>";
                myTable += "<td><p>CLOSED</p></td>";
            } else if (currSlot["participant"] == null) {
                //if slot is open, make it able to be booked by clicking on it
                //myTable += "<td><button type='button' onclick="openFunc(\'' + currSlot["idDays"] + "," + currSlot["startTime"] + '\')">Open</button></td>";
                myTable += "<td><button id='calButton' type='button' onclick='bookFunc(";
                myTable += "\""+currSlot.idDays.toString()+"\"";
                myTable += ",";
                myTable += "\""+currSlot.startTime.toString()+"\"";
                myTable += ")'";
                myTable += ">Book</button></td>";
            } else {
                //if slot is open, make it able to be closed by clicking on it
                myTable += "<td><button id='calButton' type='button' onclick='cancelFunc(";
                myTable += "\""+currSlot.idDays.toString()+"\"";
                myTable += ",";
                myTable += "\""+currSlot.startTime.toString()+"\"";
                myTable += ")'";
                myTable += ">Cancel</button>";
                if(currSlot.name != undefined){
                myTable += "<p>";
                myTable += currSlot.name.toString();
                myTable += "</p>";
                }
                myTable += "</td>"
            }
        }
        // i += columns;
        // k++;
        myTable += "</tr>";
    }
    myTable += "</table>";
    /**console.log(myTable);*/
    document.getElementById("tablePrint").innerHTML = myTable;
}

//search timeslots
function searchOpenTimeslots(){
  let secretID = document.getElementsByID("secretID");
  let monthDay = document.getElementById("viewDayText");
  let month = document.getElementById("viewMonthText");
  let year = document.getElementById("viewYearText");
  let weekday = document.getElementById("viewWeekdayText");
  let startingTime = document.getElementById("viewStartTimeText");

  let searchOpenData = [];
  searchOpenData["accessCode"] = secretID;
  searchOpenData["monthDay"] = monthDay;
  searchOpenData["startingTime"] = startingTime;
  searchOpenData["weekday"] = weekday;
  searchOpenData["year"] = year;
  searchOpenData["month"] = month;


  let searchOpenJS = JSON.stringify(searchOpenData);
  console.log("JS:" + searchOpenJS);
  let searchOpenXHR = new XMLHttpRequest();
  searchOpenXHR.open("POST", showOpen_url, true);
  // send the collected data as JSON
  searchOpenXHR.send(searchOpenJS);

  processOpenTimeslots(searchOpenXHR.responseText);
}
function processOpenTimeslots(result){}

//SysAdmin methods

//user renders
function participant() {
    //take the entered name to store in the HTML
    document.getElementById("currentName").innerHTML = "Name: "
            + document.getElementById("userText").value;

    //show participant panel
    let output = "<p> User: Participant </p>"
    output += "<label for = 'secretID'>Enter your secret code here to access a previously created schedule:</label>";
    output += "<br><textarea id='secretID' rows='2' cols='20'></textarea>";
    output += "<br><label for = 'viewDateText'>Enter date for viewing a week in the schedule here:</label>";
    output += "<br><textarea id='viewDateText' rows='2' cols='20' placeholder='yyyy-mm-dd'></textarea>";
    output += "<br><br>";
    output += "<button type='button' onclick='pullScheduleP()'>View Week</button>";
    output += "<br><label for = 'viewYearText'>Enter year here:</label>";
    output += "<br><textarea id='viewYearText' rows='2' cols='20' placeholder='yyyy'></textarea>";
    output += "<br><label for = 'viewMonthText'>Enter month here:</label>";
    output += "<br><textarea id='viewMonthText' rows='2' cols='20' placeholder='mm'></textarea>";
    output += "<br><label for = 'viewDayText'>Enter day of month here:</label>";
    output += "<br><textarea id='viewDayText' rows='2' cols='20' placeholder='dd'></textarea>";

    output += "<br><br>";
    output += "<label for='viewWeekdayText'>Enter the weekday here</label>";
    output += "<br><textarea id='viewWeekdayText' rows='2' cols='20'></textarea>";
    output += "<br><br>";
    output += "<label for='viewStartTimeText'>Enter the starting time here</label>";
    output += "<br><textarea id='viewStartTimeText' rows='2' cols='20'></textarea>";
    output += "<br><br>";
    output += "<button type='button' onclick='searchOpenTimeslots()'>View Timeslots</button>"

    document.getElementById("panelPrint").innerHTML = output;
}
function systemAdmin() {
    //take the entered login info to store in the HTML
    document.getElementById("currentName").innerHTML = "Admin: "
            + document.getElementById("loginText").value;

    //show the systemAdmin panel
    let output = "<p> User: System Administrator </p>";

    output += "<p>View Schedules created within the past X hours. </p>";
    output += "<label for = 'numHours'>Enter the number of hours here:</label>";
    output += "<br><textarea id='numHours' rows='2' cols='20'></textarea>";
    output += "<br><br>";
    output += "<button type = 'button' onclick = 'listSchedules()'>View</button>";

    output += "<p>View/Delete Schedules that are more than X days old. </p>";
    output += "<label for = 'numDays'>Enter the number of days here:</label>";
    output += "<br><textarea id='numDays' rows='2' cols='20'></textarea>";
    output += "<br><br>";
    output += "<button type = 'button' onclick = 'listSchedules()'>View</button>";
    output += "<button type = 'button' onclick = 'deleteAllSchedules()'>Delete</button>";

    document.getElementById("panelPrint").innerHTML = output;
}
function organizer() {
    //take the entered name to store in the HTML
    document.getElementById("currentName").innerHTML = "Name: "
            + document.getElementById("newOrganizer").value;

    //show the panel for organizers
    let output = "<p> User: Organizer </p>";

    output += "<br><label for = 'secretID'>Enter your secret code here:</label>";
    output += "<br><textarea id='secretID' rows='2' cols='20'></textarea>";
    output += "<br><label for = 'viewDateText'>Enter date of the week to view here:</label>";
    output += "<br><textarea id='viewDateText' rows='2' cols='20' placeholder='yyyy-mm-dd'></textarea>";
    output += "<br><br>";
    output += "<button type = 'button' onclick = 'pullSchedule()'>View Schedule</button>";
    output += "<button type = 'button' onclick = 'extendSchedule()'>Extend Schedule</button>";
    output += "<button type = 'button' onclick = 'deleteSchedule()'>Delete Schedule</button>";

    output += "<p>Close or Open time slots on a given day or all time slots at a given time </p>";
    output += "<label for = 'date'>Enter date here:</label>";
    output += "<br><textarea id='numDays' rows='2' cols='20'placeholder='yyyy-mm-dd'></textarea>";
    output += "<br><label for 'time'>Or enter time here:</label>";
    output += "<br><textarea id = 'time' rows='2' cols='20' placeholder='hh:mm'></textarea>";
    output += "<br><br>";
    output += "<button type = 'button' onclick = 'closeTimeSlot()'>Close Time Slots</button>";
    output += "<button type = 'button' onclick = 'openTimeSlot()'>Open Time Slots</button>";

    output += "<br><br>";
    output += "<p>Enter a starting and ending date:</p>";
    output += "<textarea id='createDate' rows='2' cols='20' placeholder='yyyy-mm-dd'></textarea>";
    output += "<textarea id='endDate' rows='2' cols='20' placeholder='yyyy-mm-dd'></textarea><br>";
    output += "<br><p>Enter a starting and ending time of day:</p>";
    output += "<textarea id='startTime' rows='2' cols='20' placeholder='hh:mm'></textarea>";
    output += "<textarea id='endTime' rows='2' cols='20' placeholder='hh:mm'></textarea>";
    output += "<br><p>Enter a time interval in minutes for meetings:</p>";
    output += "<textarea id='meetingInterval' rows='2' cols='20' placeholder='30'></textarea><br>";
    output += "<br><p>Enter a name for your schedule: (20 characters or less)</p>";
    output += "<textarea id='scheduleName' rows='2' cols='20' placeholder='My Schedule'></textarea><br>";
    output += "";
    output += "<br><button type='button' onclick='createSchedule()'>Create Schedule</button>";

    document.getElementById("panelPrint").innerHTML = output;
}

</script>

  <title>Jabbah-Cal</title>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="style.css">
  <!--<script src="script.js"></script> -->
</head>
<body onload="firstLoad()">
  <div class="layout">
  <div class="Header">Welcome to the Jabbah-cal</div>
    <div id="currentName"></div>
    <div id="currentInfo"></div>
  </div>
    <div class="Panel">
        <div id="panelPrint"></div>
    </div>
    <div class="Cal">
        <div id="tablePrint"></div>
    </div>
  </div>

</body>
</html>
